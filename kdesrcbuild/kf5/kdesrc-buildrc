# See the kdesrc-buildrc-sample for explanations of what the options do, or
# view the manpage or kdesrc-build documentation at
# http://kdesrc-build.kde.org/documentation/
global
    qtdir /usr

    source-dir /work/source
    build-dir /work/build
    kdedir /work/install

    cxxflags -pipe -DQT_STRICT_ITERATORS -DQURL_NO_CAST_FROM_STRING -DQT_NO_HTTP -DQT_NO_FTP -Wformat -Werror=return-type -Wno-variadic-macros -Wlogical-op
    cmake-options -DBUILD_TESTING=TRUE -DCMAKE_BUILD_TYPE=Debug -DUDEV_RULES_INSTALL_DIR=/work/install/etc/udev/

    make-options -j5
end global

include kdesrc-build/kf5-frameworks-build-include
include kdesrc-build/kf5-kdepim-build-include

module flatbuffers
    repository https://github.com/google/flatbuffers.git
    branch master
end module

module kasync
    cmake-options -DWITH_KJOB=OFF
    repository kde:kasync
    branch master
end module

module kmime
    repository kde:kmime
    branch master
end module

module akonadinext
    cmake-options -DCMAKE_C_COMPILER=/usr/bin/clang -DCMAKE_CXX_COMPILER=/usr/bin/clang++
    # cmake-options -GNinja -DCMAKE_C_COMPILER=/usr/bin/clang -DCMAKE_CXX_COMPILER=/usr/bin/clang++
    # custom-build-command ninja-build
    repository kde:akonadi-next
    branch develop
end module

module kontact-quick
    cmake-options -DCMAKE_C_COMPILER=/usr/bin/clang -DCMAKE_CXX_COMPILER=/usr/bin/clang++
    repository kde:kontact-quick
    branch feature/components
end module
